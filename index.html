<!DOCTYPE html>
<html>
<head>
    <title>Image Augmentation Tool</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: #1a1a1a; color: #fff; }
        .container { text-align: center; }
        .image-display { margin: 20px 0; }
        img { max-width: 400px; max-height: 400px; border: 1px solid #444; margin: 10px; }
        select, input, button { padding: 10px; margin: 5px; font-size: 16px; background: #333; color: #fff; border: 1px solid #555; }
        button { background: #007bff; cursor: pointer; }
        button:hover { background: #0056b3; }
        canvas { display: none; }
        .slider-container { margin: 10px 0; }
        input[type="range"] { width: 200px; }
        .slider-label { display: inline-block; width: 100px; text-align: left; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Image Augmentation Tool</h1>
        
        <div>
            <input type="file" id="imageInput" accept="image/*">
            <select id="augmentationSelect" onchange="toggleSlider()">
                <option value="rotate">Rotate</option>
                <option value="flip_horizontal">Flip Horizontal</option>
                <option value="flip_vertical">Flip Vertical</option>
                <option value="brightness">Brightness</option>
                <option value="contrast">Contrast</option>
                <option value="blur">Blur</option>
                <option value="grayscale">Grayscale</option>
            </select>
            <button onclick="augmentImage()">Apply Augmentation</button>
        </div>
        
        <div class="slider-container" id="sliderContainer" style="display: none;">
            <span class="slider-label">Intensity:</span>
            <input type="range" id="intensitySlider" min="0" max="200" value="100">
            <span id="sliderValue">100%</span>
        </div>
        
        <div class="image-display">
            <div>
                <h3>Original</h3>
                <img id="originalImage" style="display: none;">
            </div>
            <div>
                <h3>Augmented</h3>
                <img id="augmentedImage" style="display: none;">
            </div>
        </div>
        
        <canvas id="canvas"></canvas>
    </div>

    <script>
        let originalImageData = null;

        document.getElementById('imageInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById('originalImage');
                    img.src = e.target.result;
                    img.style.display = 'block';
                    originalImageData = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('intensitySlider').addEventListener('input', function(e) {
            document.getElementById('sliderValue').textContent = e.target.value + '%';
        });

        function toggleSlider() {
            const augmentation = document.getElementById('augmentationSelect').value;
            const sliderContainer = document.getElementById('sliderContainer');
            const hasIntensity = ['brightness', 'contrast', 'blur', 'grayscale'].includes(augmentation);
            sliderContainer.style.display = hasIntensity ? 'block' : 'none';
        }

        function augmentImage() {
            if (!originalImageData) {
                alert('Please select an image first');
                return;
            }
            
            const augmentation = document.getElementById('augmentationSelect').value;
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const intensity = document.getElementById('intensitySlider').value;
                
                switch(augmentation) {
                    case 'rotate':
                        ctx.translate(canvas.width/2, canvas.height/2);
                        ctx.rotate(30 * Math.PI / 180);
                        ctx.drawImage(img, -img.width/2, -img.height/2);
                        break;
                    case 'flip_horizontal':
                        ctx.scale(-1, 1);
                        ctx.drawImage(img, -img.width, 0);
                        break;
                    case 'flip_vertical':
                        ctx.scale(1, -1);
                        ctx.drawImage(img, 0, -img.height);
                        break;
                    case 'brightness':
                        ctx.filter = `brightness(${intensity}%)`;
                        ctx.drawImage(img, 0, 0);
                        break;
                    case 'contrast':
                        ctx.filter = `contrast(${intensity}%)`;
                        ctx.drawImage(img, 0, 0);
                        break;
                    case 'blur':
                        ctx.filter = `blur(${intensity/20}px)`;
                        ctx.drawImage(img, 0, 0);
                        break;
                    case 'grayscale':
                        ctx.filter = `grayscale(${intensity}%)`;
                        ctx.drawImage(img, 0, 0);
                        break;
                    default:
                        ctx.drawImage(img, 0, 0);
                }
                
                const augmentedImg = document.getElementById('augmentedImage');
                augmentedImg.src = canvas.toDataURL();
                augmentedImg.style.display = 'block';
                
                // Reset canvas context
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                ctx.filter = 'none';
            };
            
            img.src = originalImageData;
        }
    </script>
</body>
</html>